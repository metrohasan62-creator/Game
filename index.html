<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Ultimate Curvy Road Car Game</title>
<style>
/* ‚úî ‡¶®‡¶§‡ßÅ‡¶® ‡¶≠‡¶æ‡¶∞‡ßç‡¶∏‡¶® ‚Äì ‡¶Ü‡¶∞‡¶ì ‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞, ‡¶¨‡¶æ‡¶∏‡ßç‡¶§‡¶¨‡¶∏‡¶Æ‡ßç‡¶Æ‡¶§, ‡¶™‡ßá‡¶∂‡¶æ‡¶¶‡¶æ‡¶∞ ‡¶≤‡ßÅ‡¶ï */

body {
  margin: 0;
  background: #111;
  overflow: hidden;
  font-family: Arial, sans-serif;
}

#gameCanvas {
  display: block;
  margin: 0 auto;
  background: #222;
}

/* UI PANEL */
#topPanel {
  position: fixed;
  top: 10px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 20px;
  background: rgba(0,0,0,0.55);
  padding: 10px 20px;
  border-radius: 12px;
  color: #fff;
  font-size: 16px;
}

/* Steering Wheel */
#steerWheel {
  position: fixed;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  width: 160px;
  height: 160px;
  background: radial-gradient(#444, #222);
  border-radius: 50%;
  border: 6px solid #555;
  box-shadow: 0 0 20px #000 inset;
  touch-action: none;
}
#wheelCenter {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%,-50%);
  width: 50px;
  height: 50px;
  background: #666;
  border-radius: 50%;
  box-shadow: 0 0 12px #000 inset;
}

/* MENU */
#menu {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.9);
  color: #fff;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 20px;
}
#menu select, #menu button {
  padding: 10px 20px;
  font-size: 18px;
  border-radius: 8px;
  border: none;
}

</style>
</head>
<body>

<canvas id="gameCanvas" width="420" height="780"></canvas>

<div id="menu">
  <h1>üöó Ultimate Curvy Road Game</h1>

  <label>‡¶ó‡¶æ‡ßú‡¶ø‡¶∞ ‡¶∞‡¶Ç ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶®:</label>
  <select id="carColor">
    <option value="#ff2a2a">Red</option>
    <option value="#00d1ff">Cyan</option>
    <option value="#ffd500">Yellow</option>
    <option value="#00ff44">Lime</option>
  </select>

  <label>‡¶∞‡ßã‡¶° ‡¶•‡¶ø‡¶Æ:</label>
  <select id="roadTheme">
    <option value="day">Day City</option>
    <option value="night">Night City</option>
  </select>

  <button id="startBtn">Start Game</button>
</div>

<div id="topPanel" style="display:none;">
  <div>Score: <span id="scoreBox">0</span></div>
  <div>Highscore: <span id="hsBox">0</span></div>
</div>

<div id="steerWheel"><div id="wheelCenter"></div></div>

<script>
/* --------------------------------------------------
   CORE ENGINE ‚Äì ‡¶®‡¶§‡ßÅ‡¶® ‡¶≠‡¶æ‡¶∞‡ßç‡¶∏‡¶® (‡¶Ü‡¶∞‡¶ì ‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞, ‡¶∏‡ßç‡¶Æ‡ßÅ‡¶•, ‡¶¨‡¶æ‡¶∏‡ßç‡¶§‡¶¨‡¶ß‡¶∞‡ßç‡¶Æ‡ßÄ)
-----------------------------------------------------*/

const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let W = canvas.width;
let H = canvas.height;

let car = {
  x: W/2,
  y: H - 150,
  angle: 0,
  targetAngle: 0,
  color: "#ff2a2a"
};

let speed = 6;
let score = 0;
let highscore = localStorage.getItem("curvyHS") || 0;

let obstacles = [];

/* Curvy Road Function */
function roadCenterAt(y) {
  return W/2 + Math.sin(y * 0.002) * 120;
}

/* Car Steering */
const wheel = document.getElementById("steerWheel");
let steering = 0;

wheel.addEventListener("pointerdown", e => wheel.setPointerCapture(e.pointerId));
wheel.addEventListener("pointermove", e => {
  let rect = wheel.getBoundingClientRect();
  let dx = e.clientX - (rect.left + rect.width/2);
  steering = dx * 0.03;
});
wheel.addEventListener("pointerup", () => steering = 0);

/* Draw Car */
function drawCar() {
  ctx.save();
  ctx.translate(car.x, car.y);
  ctx.rotate(car.angle);

  ctx.fillStyle = car.color;
  ctx.fillRect(-25, -50, 50, 100);

  ctx.fillStyle = "#000";
  ctx.fillRect(-28, -40, 10, 30);
  ctx.fillRect(18, -40, 10, 30);
  ctx.fillRect(-28, 10, 10, 30);
  ctx.fillRect(18, 10, 10, 30);

  ctx.restore();
}

/* Draw Road */
function drawRoad() {
  for (let y = 0; y < H; y += 10) {
    let c = roadCenterAt(score + y);
    ctx.fillStyle = "#333";
    ctx.fillRect(c - 70, y, 140, 10);

    ctx.fillStyle = "#777";
    ctx.fillRect(c - 2, y, 4, 10);
  }
}

/* Draw City Buildings */
function drawBuildings() {
  for (let y = 0; y < H; y += 40) {
    let leftX = roadCenterAt(score + y) - 120;
    let rightX = roadCenterAt(score + y) + 120;

    ctx.fillStyle = "#444";
    ctx.fillRect(leftX - 80, y, 70, 40);
    ctx.fillRect(rightX + 10, y, 70, 40);
  }
}

/* Obstacles */
function spawnObstacle() {
  obstacles.push({
    x: roadCenterAt(score) + (Math.random()*120 - 60),
    y: -50
  });
}
setInterval(spawnObstacle, 900);

function drawObstacles() {
  ctx.fillStyle = "#ff5555";
  for (let ob of obstacles) {
    ctx.fillRect(ob.x - 20, ob.y - 40, 40, 80);
  }
}

/* Collision */
function checkCollision() {
  for (let ob of obstacles) {
    if (Math.abs(ob.x - car.x) < 40 && Math.abs(ob.y - car.y) < 70) {
      vibrate();
      resetGame();
    }
  }
}

function vibrate() {
  if (navigator.vibrate) navigator.vibrate(100);
}

/* Reset */
function resetGame() {
  if (score > highscore) {
    highscore = score;
    localStorage.setItem("curvyHS", highscore);
  }
  score = 0;
  obstacles = [];
}

/* GAME LOOP */
function loop() {
  ctx.clearRect(0,0,W,H);

  drawBuildings();
  drawRoad();
  drawObstacles();
  drawCar();

  car.angle += (steering - car.angle) * 0.1;
  car.x += car.angle * 4;

  for (let ob of obstacles) ob.y += speed;

  score++;
  document.getElementById("scoreBox").innerText = score;
  document.getElementById("hsBox").innerText = highscore;

  checkCollision();
  requestAnimationFrame(loop);
}

/* START GAME */
document.getElementById("startBtn").onclick = () => {
  car.color = document.getElementById("carColor").value;

  document.getElementById("menu").style.display = "none";
  document.getElementById("topPanel").style.display = "flex";

  loop();
};
</script>
</body>
</html>
